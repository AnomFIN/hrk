<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helsinki eBike-Service Oy ‚Ä¢ Premium-s√§hk√∂py√∂rien maahantuoja</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="is-preload">
    <!-- hrk ‚Äî Heavy machines. Light interface. -->
    <div class="site-shell" data-site-shell>
    <header class="hero" id="etusivu" data-reveal>
        <nav class="nav">
            <div class="nav__logo" aria-label="Helsinki eBike-Service Oy">Helsinki eBike-Service Oy</div>
            <button class="nav__toggle" type="button" aria-label="Avaa valikko" aria-controls="nav-menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav__links" id="nav-menu">
                <li><a class="nav__link" href="#tuonti" data-scroll="tuonti">Maahantuonti</a></li>
                <li><a class="nav__link" href="#kumppanit" data-scroll="kumppanit">Kumppanit</a></li>
                <li><a class="nav__link" href="#palvelut" data-scroll="palvelut">Palvelut</a></li>
                <li><a class="nav__link" href="#mallisto" data-scroll="mallisto">Mallisto</a></li>
                <li><a class="nav__link" href="#prosessi" data-scroll="prosessi">Prosessi</a></li>
                <li><a class="nav__link" href="#asiakkaat" data-scroll="asiakkaat">Asiakkaat</a></li>
                <li><a class="nav__link" href="#yhteys" data-scroll="yhteys">Yhteys</a></li>
                <li class="nav__cart">
                    <a class="nav__link nav__link--cart" href="#storefront-mallisto" data-storefront-open aria-label="Avaa verkkokauppa">
                        <span>Verkkokauppa</span>
                        <span class="nav__cart-count" data-cart-count aria-hidden="true">0</span>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="hero__content">
            <span class="hero__badge">Corporate Mobility Partner Program</span>
            <p class="hero__eyebrow">Euroopan halutuimpien s√§hk√∂py√∂r√§br√§ndien virallinen maahantuoja</p>
            <h1>Rakennamme yrityksille ja kunnille tulevaisuuden s√§hk√∂py√∂r√§kalustot</h1>
            <p class="hero__lead">Helsinki eBike-Service Oy vastaa koko ketjusta: kansainv√§liset hankintasopimukset, tullaus, fleet-asennukset ja huoltoverkoston johtaminen. Tuomme Suomeen vain uuden sukupolven s√§hk√∂py√∂ri√§, joiden suorituskyky on todistettu.</p>
            <div class="hero__actions">
                <a class="btn btn--primary btn--xl" href="#tuonti">Tutustu maahantuontiin</a>
                <a class="btn btn--ghost" href="#yhteys">Varaa kartoitus</a>
            </div>
            <p class="hero__signature">Fleet Integration Excellence</p>
        </div>
        <div class="hero__image" data-reveal>
            <div class="hero__panel">
                <img src="assets/bg.webp" alt="Uudet s√§hk√∂py√∂r√§t logistisessa keskuksessa" loading="lazy">
                <div class="hero__panel-caption">
                    <span>Launch Series 2024</span>
                    <span>Curated by Helsinki eBike-Service</span>
                </div>
            </div>
            <a class="hero__elevator" href="#yhteys" aria-label="Avaa yhteydenottolomake" data-floating-origin>
                <span class="hero__elevator-glow"></span>
                <span class="hero__elevator-text">VARAA<br><strong>CONSULTING</strong></span>
                <span class="hero__elevator-tag">Concierge-palvelu</span>
            </a>
        </div>
    </header>

    <a class="floating-cta" href="#yhteys" data-floating-cta>
        <span class="floating-cta__pulse" aria-hidden="true"></span>
        <span class="floating-cta__label">Fleet Concierge</span>
        <span class="floating-cta__title">Pyyd√§ s√§hk√∂py√∂r√§tilaus</span>
        <span class="floating-cta__signature">Import ‚Ä¢ Rekister√∂inti ‚Ä¢ Huolto</span>
    </a>

    <main>
        <section class="section" id="tuonti" data-reveal>
            <div class="section__intro">
                <span class="kicker">Maahantuonti</span>
                <h2>Hallittu toimitusketju Euroopan ja Aasian johtavilta valmistajilta</h2>
                <p>Helsinki eBike-Service Oy on erikoistunut uusien s√§hk√∂py√∂r√§mallien maahantuontiin. Solmimme suorat sopimukset tehtaidemme kanssa, auditoimme laatuprosessit ja toimitamme py√∂r√§t viimeisteltyin√§ asiakkaalle ‚Äì selke√§ll√§ dokumentaatiolla ja l√§pin√§kyv√§ll√§ raportoinnilla.</p>
            </div>
            <div class="grid grid--3">
                <article class="feature">
                    <span class="feature__icon">üåç</span>
                    <h3>Globaalit partnerit</h3>
                    <p>Suora edustus mm. Specialized, Trek, Riese &amp; M√ºller, Gazelle ja Giant -tehtaille. Saat mallistot ennen julkista lanseerausta.</p>
                </article>
                <article class="feature">
                    <span class="feature__icon">üßæ</span>
                    <h3>Tullaus &amp; compliance</h3>
                    <p>Hoidamme EU-sertifioinnit, HS-koodit ja akkulogistiikan. Asiakkaamme saa valmiit CE- ja CO‚ÇÇ-raportit.</p>
                </article>
                <article class="feature">
                    <span class="feature__icon">üîß</span>
                    <h3>Elinkaaripalvelut</h3>
                    <p>Oma huoltoverkostomme takaa, ett√§ jokainen tuontier√§ pysyy ajokunnossa ja takuuseuranta on reaaliaikaista.</p>
                </article>
            </div>
        </section>

        <section class="section section--light" data-reveal>
            <div class="metrics">
                <div class="metrics__item">
                    <span class="metrics__value" data-counter data-target="1200" data-suffix="+">0</span>
                    <span class="metrics__label">Tuotua s√§hk√∂py√∂r√§√§ 2023‚Äì2024</span>
                </div>
                <div class="metrics__item">
                    <span class="metrics__value" data-counter data-target="18" data-suffix=" maata">0</span>
                    <span class="metrics__label">Hankintakohteita globaalisti</span>
                </div>
                <div class="metrics__item">
                    <span class="metrics__value" data-counter data-target="98" data-suffix="%">0</span>
                    <span class="metrics__label">Asiakastyytyv√§isyys toimitusnopeudessa</span>
                </div>
                <div class="metrics__item">
                    <span class="metrics__value" data-counter data-target="72" data-suffix="h">0</span>
                    <span class="metrics__label">Logistinen vasteaika varastolta asiakkaalle</span>
                </div>
            </div>
        </section>

        <section class="section" id="kumppanit" data-reveal>
            <div class="section__intro">
                <span class="kicker">Valmistajakumppanuudet</span>
                <h2>Yhteisty√∂sopimukset markkinoiden johtavien s√§hk√∂py√∂r√§br√§ndien kanssa</h2>
                <p>Huolehdimme sopimusneuvotteluista ja mallistojen saatavuuksista suoraan valmistajien p√§√§konttoreiden kanssa. Strategiset kumppanuudet takaavat, ett√§ voimme tarjota yrityksille kysytyimm√§t mallit r√§√§t√§l√∂ityin√§ toimituspaketteina.</p>
            </div>
            <div class="alliances">
                <div class="alliances__grid" role="list">
                    <article class="alliance-card" role="listitem">
                        <div class="alliance-card__logo">Specialized</div>
                        <p>Turbo-sarjan eksklusiivinen yritysmyyntioikeus Pohjoismaissa. Tuomme IGH-vaihteistolla ja Mission Control -telematiikalla varustetut mallit suoraan varastoosi.</p>
                        <ul>
                            <li>Turbo Vado 5.0 IGH ‚Ä¢ executive-k√§ytt√∂√∂n</li>
                            <li>Turbo Como 4.0 ‚Ä¢ hallittu leasing-malli</li>
                            <li>Turbo Tero X 6.0 ‚Ä¢ maasto- ja huoltohenkil√∂st√∂√∂n</li>
                        </ul>
                        <span class="alliance-card__cta">Mallisto saatavana 6 viikon toimitusajalla</span>
                    </article>
                    <article class="alliance-card" role="listitem">
                        <div class="alliance-card__logo">Trek</div>
                        <p>Trek Corporationin kanssa solmittu kumppanuus kattaa Allant+ ja Rail -sarjat. R√§√§t√§l√∂imme akunhallinnan ja lis√§varustelun yritysflotteihin.</p>
                        <ul>
                            <li>Allant+ 9.9S ‚Ä¢ kaupunkien yritysliikkuminen</li>
                            <li>Rail 9.8 XT ‚Ä¢ teknisen kentt√§ty√∂n ratkaisut</li>
                            <li>FX+ 2 Stagger ‚Ä¢ henkil√∂st√∂etuohjelmat</li>
                        </ul>
                        <span class="alliance-card__cta">Saatavuus vahvistettuna 2024‚Äì2025 sopimuskaudelle</span>
                    </article>
                    <article class="alliance-card" role="listitem">
                        <div class="alliance-card__logo">Riese &amp; M√ºller</div>
                        <p>Saksalainen premium-valmistaja valitsi meid√§t pohjoismaiseksi fleet-kumppaniksi. Concierge-palvelumme varmistaa yksil√∂lliset varustelut.</p>
                        <ul>
                            <li>Culture Silent ‚Ä¢ johdon k√§ytt√∂√∂n</li>
                            <li>Load 75 Touring ‚Ä¢ jakelu- ja kunnallisteht√§v√§t</li>
                            <li>Multicharger GT Touring ‚Ä¢ hybridi-fleet</li>
                        </ul>
                        <span class="alliance-card__cta">Mukautettavat huoltosopimukset ja buy-back-optio</span>
                    </article>
                    <article class="alliance-card" role="listitem">
                        <div class="alliance-card__logo">Gazelle</div>
                        <p>Royal Dutch Gazellen kanssa tehty laajennettu sopimus tuo saataville suosituimmat commuter-mallit. Tarjoamme t√§ydent√§v√§n varustetuen ja ty√∂matkaliikenteen palvelut.</p>
                        <ul>
                            <li>Ultimate C380 HMB ‚Ä¢ matalapalkoinen runko</li>
                            <li>Avignon C8 HMB ‚Ä¢ leasing-ohjelmat</li>
                            <li>HeavyDutyNL C7+ HMB ‚Ä¢ toimitus- ja kuljetuspalvelut</li>
                        </ul>
                        <span class="alliance-card__cta">Varastotasot p√§ivittyv√§t viikoittain portaaliimme</span>
                    </article>
                    <article class="alliance-card" role="listitem">
                        <div class="alliance-card__logo">Giant</div>
                        <p>Giant Groupin kanssa tehty pitk√§aikainen sopimus mahdollistaa suuret volyymit ja nopeat lis√§tilaukset sek√§ yritys- ett√§ julkisen sektorin hankintoihin.</p>
                        <ul>
                            <li>Explore E+ 1 Pro ‚Ä¢ retki- ja huoltoajot</li>
                            <li>FastRoad E+ EX Pro ‚Ä¢ yrityskuriirit</li>
                            <li>Stormguard E+ ‚Ä¢ vaativat s√§√§olosuhteet</li>
                        </ul>
                        <span class="alliance-card__cta">Integroitu telemetria ja varaosalogistiikka</span>
                    </article>
                </div>
            </div>
        </section>

        <section class="section" id="kehitysohjelma" data-reveal>
            <div class="section__intro">
                <span class="kicker">Kokonaisuus</span>
                <h2>Viisi ominaisuutta, jotka nostavat sivuston yritysmyynnin seuraavalle tasolle</h2>
                <p>Kehitimme sis√§lt√∂- ja k√§ytt√∂liittym√§kokonaisuuden, joka tuo esiin maahantuonnin asiantuntemuksen, helpottaa p√§√§t√∂ksentekoa ja tekee esityksest√§ kevyen k√§ytt√§√§ kaikilla laitteilla.</p>
            </div>
            <div class="grid grid--5">
                <article class="capability">
                    <span class="capability__index">01</span>
                    <h3>Executive-etusivu</h3>
                    <p>Hero-osio kiteytt√§√§ arvolupauksen yritysp√§√§tt√§jille ja tarjoaa selke√§t toimintakehotteet tarjouspyynt√∂√§ ja kartoitusta varten.</p>
                </article>
                <article class="capability">
                    <span class="capability__index">02</span>
                    <h3>Dataohjattu referenssivirta</h3>
                    <p>Visualisoitu mittaristo ja referenssit kertovat toimitusvarmuudesta ja laatuindikaattoreista ilman ylim√§√§r√§ist√§ kuormaa.</p>
                </article>
                <article class="capability">
                    <span class="capability__index">03</span>
                    <h3>Kevyt mediastrategia</h3>
                    <p>Optimoidut kuvat ja responsiiviset kortit pit√§v√§t latausajat nopeina, mutta mahdollistavat silti n√§ytt√§v√§n tuotepresentaation.</p>
                </article>
                <article class="capability">
                    <span class="capability__index">04</span>
                    <h3>Yritysmyynnin sis√§ll√∂t</h3>
                    <p>Palvelukuvaukset, prosessivaiheet ja tarjouspyynt√∂lomake tukevat hankintap√§√§t√∂ksi√§, my√∂s kuntien ja konsernien kilpailutuksissa.</p>
                </article>
                <article class="capability">
                    <span class="capability__index">05</span>
                    <h3>Integroitu laatuviestint√§</h3>
                    <p>Sertifikaatit, riskienhallintalinjaukset ja elinkaaripalvelut on koottu selke√§sti, mik√§ vahvistaa vastuullista kumppanikokemusta.</p>
                </article>
            </div>
        </section>

        <section class="section section--experience" id="palvelut" data-reveal>
            <div class="experience">
                <div class="experience__intro">
                    <span class="kicker">Palvelukokonaisuus</span>
                    <h2>Premium-kaluston k√§ytt√∂√∂notto on huolellisesti orkestroitu</h2>
                    <p>Asiantuntijatiimimme rakentaa jokaiselle asiakkaalle palveluohjelman, johon sis√§ltyy koulutus, data-analytiikka ja proaktiivinen huolto. Kokemuksemme ulkomaankaupasta n√§kyy l√§pin√§kyv√§n√§ hinnoitteluna ja moitteettomana toimitusketjuna.</p>
                    <div class="experience__tags">
                        <span>Hankintastrategia</span>
                        <span>Fleet Launch</span>
                        <span>Data Monitoring</span>
                        <span>24/7 Concierge</span>
                    </div>
                </div>
                <div class="experience__grid">
                    <article class="experience-card">
                        <img src="https://images.unsplash.com/photo-1529429617124-aee711a0fb7c?auto=format&fit=crop&w=1200&q=80" alt="Laadunvarmistus s√§hk√∂py√∂r√§tehtaalla" loading="lazy">
                        <div class="experience-card__body">
                            <h3>Hankintakonsultointi</h3>
                            <p>Analysoimme asiakkaan k√§ytt√∂tapaukset ja rakennamme tuontiohjelman. Ennusteet perustuvat markkinadataan ja valmistajien kapasiteetteihin.</p>
                            <ul>
                                <li>Segmentointi: yritys, kunta, logistiikka</li>
                                <li>Valmistajaneuvottelut oman tiimimme johdolla</li>
                                <li>Riskienhallinta ja auditoinnit</li>
                            </ul>
                        </div>
                    </article>
                    <article class="experience-card">
                        <img src="https://images.unsplash.com/photo-1511732351666-a1d79b47b9a4?auto=format&fit=crop&w=1200&q=80" alt="S√§hk√∂py√∂rien k√§ytt√∂√∂notto" loading="lazy">
                        <div class="experience-card__body">
                            <h3>K√§ytt√∂√∂notto &amp; koulutus</h3>
                            <p>Tuomme py√∂r√§t valmiiksi varusteltuina. Asennamme telematiikan, valvomme akkujen tasapainotuksen ja koulutamme kuljettajat.</p>
                            <ul>
                                <li>Fleet dashboard ja raportointi</li>
                                <li>Reaaliaikaiset huoltomuistutukset</li>
                                <li>Concierge-palvelu p√§√§k√§ytt√§jille</li>
                            </ul>
                        </div>
                    </article>
                    <article class="experience-card">
                        <img src="https://images.unsplash.com/photo-1594007654729-407eedc4be65?auto=format&fit=crop&w=1200&q=80" alt="Huoltoasiantuntija" loading="lazy">
                        <div class="experience-card__body">
                            <h3>Elinkaaren optimointi</h3>
                            <p>Datapohjainen huolto-ohjelma pident√§√§ kaluston k√§ytt√∂ik√§√§ ja minimoi seisokit. Raportoimme CO‚ÇÇ-s√§√§st√∂t kuukausittain.</p>
                            <ul>
                                <li>Proaktiiviset huoltoslotit</li>
                                <li>Varapy√∂r√§pooli &amp; takuuvalvonta</li>
                                <li>J√§lkimarkkinointi ja buy-back</li>
                            </ul>
                        </div>
                    </article>
                </div>
                <div class="experience__timeline" id="prosessi">
                    <div class="experience__stage" data-reveal>
                        <span class="experience__stage-time">Viikot 1‚Äì2</span>
                        <h3>Kickoff &amp; tilaus</h3>
                        <p>Projektisuunnitelma, mallistovahvistus, rahoitusratkaisut ja sopimusten allekirjoitus digitaalisessa portaaliymp√§rist√∂ss√§mme.</p>
                    </div>
                    <div class="experience__stage" data-reveal>
                        <span class="experience__stage-time">Viikot 3‚Äì5</span>
                        <h3>Tuotanto &amp; laadunvarmistus</h3>
                        <p>Tehdasvierailut, komponenttiseuranta ja akkukapasiteetin mittaus. Valvomme, ett√§ jokainen yksil√∂ t√§ytt√§√§ suomalaiset olosuhteet.</p>
                    </div>
                    <div class="experience__stage" data-reveal>
                        <span class="experience__stage-time">Viikot 6‚Äì7</span>
                        <h3>Logistiikka &amp; tullaus</h3>
                        <p>Merirahti, lentorahti tai rekkatoimitus. Me hoidamme tullauksen, vakuutukset ja rekister√∂innin.</p>
                    </div>
                    <div class="experience__stage" data-reveal>
                        <span class="experience__stage-time">Viikko 8</span>
                        <h3>Luovutus &amp; jatkuva yll√§pito</h3>
                        <p>Showroom-luovutus, koulutus ja huoltosopimuksen k√§ynnistys. Concierge pit√§√§ kaluston liikkeess√§.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="mallisto" data-reveal>
            <div class="section__intro">
                <span class="kicker">Mallisto</span>
                <h2>Kuratoidut uutuudet 2024 ‚Äì yrityshankintaan optimoituina</h2>
                <p>Laajennamme mallistoa jatkuvasti ja valitsemme vain tehdastakuullisia versioita. Nostot alla ovat esimerkkej√§ t√§m√§n kauden toimituksista.</p>
            </div>
            <div class="store__grid store__grid--showcase">
                <article class="store-card" data-reveal>
                    <img src="https://images.unsplash.com/photo-1485965120184-e220f721d03e?auto=format&fit=crop&w=1200&q=80" alt="Tyylik√§s s√§hk√∂py√∂r√§ kaupunkimilj√∂√∂ss√§" loading="lazy">
                    <div class="store-card__body">
                        <span class="store-card__tag">Urban Performance</span>
                        <h3>Tenways AGO X Pro</h3>
                        <p>139 km kantama, Enviolo automaattivaihteisto ja Gates-hihna. Sis√§lt√§√§ Launch Care 299 -palvelun.</p>
                        <div class="store-card__footer">
                            <span class="store-card__price">Tilaukset alk. 3 690 ‚Ç¨</span>
                            <a class="btn btn--secondary" href="#storefront-mallisto" data-storefront-open data-storefront-product="tenways-cgo-one">Siirry tilaamaan</a>
                        </div>
                    </div>
                </article>
                <article class="store-card" data-reveal>
                    <img src="https://images.unsplash.com/photo-1549298916-b41d501d3772?auto=format&fit=crop&w=1200&q=80" alt="Cargo-s√§hk√∂py√∂r√§ lastattuna" loading="lazy">
                    <div class="store-card__body">
                        <span class="store-card__tag">Cargo Logistics</span>
                        <h3>Tern GSD Fleet Edition</h3>
                        <p>Kaksoisakku, Bosch Cargo Line ja modulaariset kuormatelineet. Fleet Signature 1499 takaa huoltojatkumon.</p>
                        <div class="store-card__footer">
                            <span class="store-card__price">Tilaukset alk. 5 890 ‚Ç¨</span>
                            <a class="btn btn--secondary" href="#storefront-mallisto" data-storefront-open data-storefront-product="tern-gsd-performance">Pyyd√§ tarjousta</a>
                        </div>
                    </div>
                </article>
                <article class="store-card" data-reveal>
                    <img src="https://images.unsplash.com/photo-1523419409543-0c1df022bdd9?auto=format&fit=crop&w=1200&q=80" alt="Premium-s√§hk√∂py√∂r√§ sis√§tiloissa" loading="lazy">
                    <div class="store-card__body">
                        <span class="store-card__tag">Executive Comfort</span>
                        <h3>Riese &amp; M√ºller Culture Silent</h3>
                        <p>Premium-runko, Fox-s√§√§t√∂haarukka ja √§lykk√§√§t valot. Sis√§ltyy Pro Active 699 -huolto-ohjelmaan.</p>
                        <div class="store-card__footer">
                            <span class="store-card__price">Tilaukset alk. 6 490 ‚Ç¨</span>
                            <a class="btn btn--secondary" href="#storefront-mallisto" data-storefront-open data-storefront-product="riese-muller-load-75">Kokoa paketti</a>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section class="section section--light" id="asiakkaat" data-reveal>
            <div class="gallery">
                <div class="gallery__intro">
                    <span class="kicker">Referenssit</span>
                    <h2>Asiakkaamme luottavat Helsinki eBike-Serviceen</h2>
                    <p>Julkisen sektorin toimijat, logistiikkayhti√∂t ja liikkumisen edell√§k√§vij√§t rakentavat kalustonsa kanssamme. Alla poimintoja toteutuksista.</p>
                </div>
                <div class="gallery__grid">
                    <figure class="gallery__item">
                        <img src="https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=1200&q=80" alt="Kaupunkilogistiikan tiimi s√§hk√∂py√∂rien kanssa" loading="lazy">
                        <figcaption>
                            <strong>CityPost Logistics</strong>
                            <span>120 cargo-py√∂r√§√§, 3 maan toimitusketju, 99,2 % k√§ytt√∂aste</span>
                        </figcaption>
                    </figure>
                    <figure class="gallery__item">
                        <img src="https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&w=1200&q=80" alt="Kunnallisen py√∂r√§j√§rjestelm√§n k√§ytt√§j√§t" loading="lazy">
                        <figcaption>
                            <strong>Helsingin kaupunki</strong>
                            <span>Julkisen sektorin leasing, 240 py√∂r√§√§, CO‚ÇÇ-raportointi kuukausittain</span>
                        </figcaption>
                    </figure>
                    <figure class="gallery__item">
                        <img src="https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?auto=format&fit=crop&w=1200&q=80" alt="Yrityksen s√§hk√∂py√∂r√§pooli" loading="lazy">
                        <figcaption>
                            <strong>Nordic Energy Group</strong>
                            <span>Executive fleet, concierge-huolto ja telematiikkaraportointi</span>
                        </figcaption>
                    </figure>
                </div>
            </div>
        </section>

        <section class="section" data-reveal>
            <div class="section__intro">
                <span class="kicker">Laskuri</span>
                <h2>Laske mit√§ s√§√§st√§t ennakoivalla huollolla</h2>
                <p>Sy√∂t√§ kalustosi luvut ja arvioi, kuinka paljon ennakoiva huolto vapauttaa kapasiteettia ja s√§√§st√§√§ kustannuksia.</p>
            </div>
            <form class="calculator" data-calculator>
                <div class="calculator__grid">
                    <label>
                        S√§hk√∂py√∂rien m√§√§r√§
                        <input type="number" name="machines" min="0" step="1" placeholder="Esim. 45" required>
                    </label>
                    <label>
                        Keskim√§√§r√§inen seisokki (h/kk)
                        <input type="number" name="downtime" min="0" step="0.5" placeholder="Esim. 8" required>
                    </label>
                    <label>
                        Tunnin kustannus (‚Ç¨)
                        <input type="number" name="hourlyCost" min="0" step="50" placeholder="Esim. 120" required>
                    </label>
                    <label>
                        Ennakoivan huollon vaikutus (%)
                        <input type="number" name="prevented" min="0" max="100" step="5" placeholder="Esim. 65" required>
                    </label>
                </div>
                <button type="submit" class="btn btn--primary">Laske s√§√§st√∂</button>
            </form>
            <div class="calculator__result" data-calculator-result>
                <p class="calculator__placeholder">Sy√∂t√§ luvut n√§hd√§ksesi tuoton. Autamme mitoittamaan oikean palvelutason.</p>
            </div>
        </section>

        <section class="section section--accent" data-reveal>
            <div class="section__intro">
                <span class="kicker">Laatu &amp; sertifikaatit</span>
                <h2>Laatu on osa jokaista toimitusta</h2>
                <p>Ty√∂skentelemme yhdess√§ akkutoimittajien, vakuutusyhti√∂iden ja viranomaisten kanssa. Asiakkaamme saavat l√§pin√§kyv√§n dokumentaation.</p>
            </div>
            <div class="badges">
                <div class="badges__item">
                    <span>ISO 9001 partner-auditoinnit</span>
                </div>
                <div class="badges__item">
                    <span>UL2849 akkustandardien valvonta</span>
                </div>
                <div class="badges__item">
                    <span>CE-merkint√§ ja EEC-vaatimustenmukaisuus</span>
                </div>
                <div class="badges__item">
                    <span>Hiilijalanj√§lkiraportointi (GHG Protocol)</span>
                </div>
            </div>
        </section>

        <section class="section" id="yhteys" data-reveal>
            <div class="contact">
                <div class="contact__info">
                    <span class="kicker">Concierge</span>
                    <h2>Varaa strateginen kartoitus</h2>
                    <p>Helsinki eBike-Service Oy johtaa projektin alusta loppuun. Kerro kalustotarpeesi ja ajamme ensimm√§isen er√§n maahan.</p>
                    <ul class="contact__details">
                        <li><strong>Puhelin:</strong> <a href="tel:+358403255131">040 325 5131</a></li>
                        <li><strong>S√§hk√∂posti:</strong> <a href="mailto:info@helsinkiebikeservice.fi">info@helsinkiebikeservice.fi</a></li>
                        <li><strong>Showroom:</strong> Herttoniemi, Helsinki</li>
                    </ul>
                    <div class="contact__cta">
                        <a class="btn btn--primary" href="mailto:info@helsinkiebikeservice.fi">Sovi tapaaminen</a>
                        <a class="btn btn--ghost" href="#storefront-mallisto" data-storefront-open>Tutustu verkkokauppaan</a>
                    </div>
                </div>
                <form class="contact__form">
                    <h3>Projektin l√§ht√∂tiedot</h3>
                    <label>
                        Nimi / organisaatio
                        <input type="text" name="nimi" placeholder="Yritys tai yhteyshenkil√∂" required>
                    </label>
                    <label>
                        S√§hk√∂posti
                        <input type="email" name="email" placeholder="sin√§@yritys.fi" required>
                    </label>
                    <label>
                        Kalustotarve
                        <input type="text" name="malli" placeholder="Esim. 30 cargoa, 20 premiumia">
                    </label>
                    <label>
                        Viesti
                        <textarea name="viesti" rows="4" placeholder="Kerro toimitusaikataulu, huoltotaso ja erityistoiveet" required></textarea>
                    </label>
                    <button type="submit" class="btn btn--primary">L√§het√§ viesti</button>
                    <p class="contact__disclaimer">Tallennamme tiedot maahantuontiprosessin k√§ynnist√§miseksi ja pid√§mme sinut ajan tasalla jokaisesta vaiheesta.</p>
                </form>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer__branding">
            <span class="footer__logo">Helsinki eBike-Service Oy</span>
            <p>Premium-s√§hk√∂py√∂rien maahantuonti, huolto ja verkkokauppa. Rakennamme uudet liikkuvuuden standardit.</p>
        </div>
        <div class="footer__links">
            <div>
                <h4>Palvelut</h4>
                <ul>
                    <li><a href="#tuonti">Maahantuonti</a></li>
                    <li><a href="#palvelut">K√§ytt√∂√∂notto</a></li>
                    <li><a href="#asiakkaat">Referenssit</a></li>
                </ul>
            </div>
            <div>
                <h4>Ratkaisut</h4>
                <ul>
                    <li><a href="#mallisto">Mallisto</a></li>
                    <li><a href="#prosessi">Projektinhallinta</a></li>
                    <li><a href="#storefront-mallisto" data-storefront-open>Verkkokauppa</a></li>
                </ul>
            </div>
            <div>
                <h4>Yhteys</h4>
                <ul>
                    <li><a href="tel:+358403255131">040 325 5131</a></li>
                    <li><a href="mailto:info@helsinkiebikeservice.fi">info@helsinkiebikeservice.fi</a></li>
                    <li>Aarteenetsij√§ntie 4, 00970 Helsinki</li>
                </ul>
            </div>
        </div>
        <div class="footer__meta">
            <span>Helsinki eBike-Service Oy ‚Ä¢ Premium Electric Mobility</span>
            <span>¬© <span id="year"></span> Helsinki eBike-Service Oy</span>
        </div>
    </footer>
    </div>

    <div class="storefront-layer" data-storefront-layer aria-hidden="true">
        <div class="storefront-layer__backdrop" data-storefront-close aria-hidden="true"></div>
        <div class="storefront-layer__surface" role="dialog" aria-modal="true" aria-label="Helsinki eBike-Service Oy verkkokauppa" tabindex="-1">
            <nav class="nav nav--store" data-reveal>
                <div class="nav__logo" aria-label="Helsinki eBike-Service Oy">
                    <a class="nav__logo-link" href="#etusivu" data-storefront-close>Helsinki eBike-Service Oy</a>
                    <span class="nav__logo-sub">AnomFIN eBike Boutique</span>
                </div>
                <button class="nav__toggle" type="button" aria-label="Avaa valikko" aria-controls="store-nav-menu" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <ul class="nav__links" id="store-nav-menu" role="tablist">
                    <li><a class="nav__link nav__link--pill is-active" href="#" role="tab" aria-selected="true" data-storefront-tab="mallisto" data-scroll="storefront-mallisto" data-storefront-trigger>Mallisto</a></li>
                    <li><a class="nav__link nav__link--pill" href="#" role="tab" aria-selected="false" data-storefront-tab="checkout" data-scroll="storefront-checkout" data-storefront-trigger>Kassa</a></li>
                    <li class="nav__cart">
                        <span class="nav__link nav__link--cart">
                            <span>Ostoskorissa</span>
                            <span class="nav__cart-count" data-cart-count aria-live="polite">0</span>
                        </span>
                    </li>
                    <li><button class="nav__link nav__link--pill" type="button" data-storefront-close>Sulje</button></li>
                </ul>
            </nav>
            <header class="store-header" data-reveal>
                <div>
                    <span class="store-header__badge">Signature Experience ‚Ä¢ AnomFIN</span>
                    <h1>Curated eBike Drop 2024</h1>
                    <p>Mallisto on esivalittu Specialized-, Trek-, Riese &amp; M√ºller-, Gazelle- ja Giant -kumppanien huippumalleista. Aloita mallistosta ja siirry kassalle, kun kokoonpano on valmis.</p>
                </div>
                <div class="store-header__meta">
                    <span>Live-tilausstatus</span>
                    <strong data-live-status>Varastotilan p√§ivitys 4 min sitten</strong>
                </div>
            </header>

            <div class="storefront__steps" aria-hidden="true">
                <div class="storefront__step storefront__step--active">Mallisto</div>
                <div class="storefront__step">Kassa</div>
            </div>

            <main class="storefront storefront--mallisto" data-storefront data-storefront-root>
                <aside class="storefront__panel storefront__panel--nav" data-storefront-view="mallisto" aria-hidden="false">
                    <div class="storefront__panel-header">
                        <h2>Mallisto</h2>
                        <p class="storefront__panel-lead">Kuratointi vastaa etusivulla esiteltyj√§ valmistajia. Jokainen malli on valittu yritys- ja kuntak√§ytt√∂√∂n AnomFIN Concierge -palvelun kanssa.</p>
                        <ul class="storefront__brand-list" role="list">
                            <li>Specialized</li>
                            <li>Trek</li>
                            <li>Riese &amp; M√ºller</li>
                            <li>Gazelle</li>
                            <li>Giant</li>
                        </ul>
                    </div>
                    <div class="storefront__filters" role="group" aria-label="Suodata mallistoa">
                        <button class="storefront__filter is-active" type="button" data-category-button="all">Kaikki</button>
                        <button class="storefront__filter" type="button" data-category-button="executive">Executive</button>
                        <button class="storefront__filter" type="button" data-category-button="trail">Trail</button>
                        <button class="storefront__filter" type="button" data-category-button="cargo">Cargo</button>
                        <button class="storefront__filter" type="button" data-category-button="commuter">Commuter</button>
                        <button class="storefront__filter" type="button" data-category-button="utility">Utility</button>
                    </div>
                    <div class="storefront__divider"></div>
                    <div class="storefront__product-list" data-product-list role="list" aria-label="Tuotelista"></div>
                    <div class="storefront__advisor">
                        <p><strong>AnomFIN Concierge</strong> aktivoi jokaisen tilauksen ja sopii koeajon. Tarvitsetko apua? <a href="mailto:concierge@anomfin.com">concierge@anomfin.com</a></p>
                        <span class="storefront__signature">Jugi@AnomFIN</span>
                    </div>
                </aside>

                <section class="storefront__panel storefront__panel--spotlight" id="storefront-mallisto" data-storefront-view="mallisto" aria-hidden="false">
                    <div class="storefront__gallery">
                        <div class="storefront__badge" data-detail-badge></div>
                        <img class="storefront__image" src="" alt="" data-detail-image>
                        <div class="storefront__gallery-meta">
                            <span data-detail-availability></span>
                            <span data-detail-range></span>
                        </div>
                    </div>
                    <article class="storefront__details">
                        <span class="storefront__category" data-detail-category></span>
                        <h2 data-detail-title></h2>
                        <p class="storefront__lead" data-detail-lead></p>
                        <div class="storefront__grid">
                            <div>
                                <h3>Keskeiset hy√∂dyt</h3>
                                <ul class="storefront__features" data-detail-features></ul>
                            </div>
                            <div>
                                <h3>Projektipaketit</h3>
                                <ul class="storefront__packages" data-detail-packages></ul>
                            </div>
                        </div>
                        <div class="storefront__cta" data-product-spotlight>
                            <div class="storefront__price">
                                <span>Tilauksen netto</span>
                                <strong data-detail-price></strong>
                                <small data-detail-support></small>
                            </div>
                            <div class="storefront__cta-buttons" data-product="" data-price="" data-product-cta>
                                <button class="btn btn--primary btn--xl" type="button" data-add-to-cart data-product-add>Lis√§√§ koriin</button>
                                <button class="btn btn--ghost" type="button" data-scroll="storefront-checkout" data-storefront-trigger>Siirry kassalle</button>
                            </div>
                        </div>
                    </article>
                </section>

                <section class="storefront__panel storefront__panel--checkout" id="storefront-checkout" data-storefront-view="checkout" hidden aria-hidden="true">
                    <div class="storefront__panel-header">
                        <h2>Kassa</h2>
                        <p>Viimeistele yritys- tai kuntatilauksesi. Tiedot salataan ja v√§litet√§√§n AnomFIN Concierge -palvelulle.</p>
                    </div>
                    <form class="checkout-form" data-checkout-form>
                        <div class="checkout-form__grid">
                            <label class="checkout-form__field">
                                <span>Yritys / organisaatio</span>
                                <input type="text" name="company" required maxlength="80" autocomplete="organization" data-auto-focus>
                            </label>
                            <label class="checkout-form__field">
                                <span>Y-tunnus</span>
                                <input type="text" name="businessId" required maxlength="20" pattern="[0-9]{7}-[0-9]" autocomplete="organization-id" placeholder="1234567-8">
                                <small>Muoto: 1234567-8</small>
                            </label>
                            <label class="checkout-form__field">
                                <span>Yhteyshenkil√∂</span>
                                <input type="text" name="contact" required maxlength="60" autocomplete="name">
                            </label>
                            <label class="checkout-form__field">
                                <span>S√§hk√∂posti</span>
                                <input type="email" name="email" required maxlength="120" autocomplete="email" inputmode="email">
                            </label>
                            <label class="checkout-form__field">
                                <span>Puhelin</span>
                                <input type="tel" name="phone" required maxlength="30" inputmode="tel" autocomplete="tel">
                            </label>
                            <label class="checkout-form__field">
                                <span>Toimituskunta</span>
                                <input type="text" name="city" required maxlength="50" autocomplete="address-level2">
                            </label>
                            <label class="checkout-form__field checkout-form__field--span">
                                <span>Toimitusaikatoive</span>
                                <select name="deliveryWindow" required>
                                    <option value="">Valitse</option>
                                    <option value="2-4 weeks">2‚Äì4 viikkoa</option>
                                    <option value="4-6 weeks">4‚Äì6 viikkoa</option>
                                    <option value="custom">Sovitaan erikseen</option>
                                </select>
                            </label>
                            <label class="checkout-form__field checkout-form__field--span">
                                <span>Lis√§tiedot</span>
                                <textarea name="notes" rows="3" maxlength="400" placeholder="Kaluston k√§ytt√∂tarkoitus, varustelu, toimitusrajaukset..."></textarea>
                            </label>
                        </div>
                        <label class="checkout-form__consent">
                            <input type="checkbox" name="consent" value="yes" required>
                            <span>Hyv√§ksyn, ett√§ tietoni tallennetaan AnomFIN Concierge -palveluun tilausta varten.</span>
                        </label>
                        <div class="checkout-form__actions">
                            <button class="btn btn--ghost" type="button" data-storefront-back="mallisto">Takaisin mallistoon</button>
                            <button class="btn btn--primary btn--xl" type="submit">L√§het√§ tilauspyynt√∂</button>
                        </div>
                        <div class="checkout-form__errors" data-form-errors role="alert" aria-live="polite"></div>
                    </form>
                    <div class="checkout-form__confirmation" data-checkout-confirmation hidden>
                        <h3>Tilauksen vastaanotto onnistui</h3>
                        <p>AnomFIN Concierge kuittaa tilauksen muutamassa minuutissa ja vahvistaa toimitusaikataulun.</p>
                        <dl data-checkout-summary></dl>
                        <div class="checkout-receipt-actions">
                            <button class="btn btn--primary" type="button" onclick="tulostaKuitti()">üñ®Ô∏è Tulosta kuitti</button>
                            <button class="btn btn--ghost" type="button" onclick="lataaTilausKuitti()">üìÑ Lataa PDF</button>
                            <button class="btn btn--secondary" type="button" onclick="naytaKuittiHistoria()">üìö Kuittihistoria</button>
                            <button class="btn btn--secondary" type="button" onclick="naytaMallipohjaValikko()">üìã Mallipohjat</button>
                            <button class="btn btn--secondary" type="button" onclick="naytaAsciiTyokalu()">üé® ASCII Logo</button>
                            <button class="btn btn--secondary" type="button" onclick="naytaViivakoodi()">üìä Viivakoodi</button>
                        </div>
                    </div>
                </section>

                <aside class="storefront__panel storefront__panel--summary" id="storefront-order" data-store>
                    <div class="storefront__summary-header">
                        <h2>Ostoskorisi</h2>
                        <p data-cart-empty>Lis√§√§ tuotteita koriin n√§hd√§ksesi tarjouksen erittelyn.</p>
                    </div>
                    <ul class="storefront__cart-list" data-cart-items></ul>
                    <div class="storefront__total">
                        <span>V√§lisumma (ALV 0 %)</span>
                        <strong data-cart-total>0 ‚Ç¨</strong>
                    </div>
                    <div class="storefront__checkout">
                        <h3>Verkkomaksu</h3>
                        <p>Valitse maksutapa ja viimeistele tilaus turvallisesti AnomFIN maksulinkin kautta.</p>
                        <div class="storefront__payment-buttons">
                            <button class="storefront__payment-button storefront__payment-button--primary" type="button" data-checkout-button>
                                <span>Maksa verkkopankissa</span>
                                <small>Tuetut pankit: OP, Nordea, Danske</small>
                            </button>
                            <button class="storefront__payment-button" type="button" data-checkout-button>
                                <span>Apple Pay / Google Pay</span>
                                <small>V√§lit√∂n vahvistus</small>
                            </button>
                            <button class="storefront__payment-button" type="button" data-checkout-button>
                                <span>Yrityskortti</span>
                                <small>Visa, Mastercard, Amex</small>
                            </button>
                        </div>
                        <div class="storefront__assurance">
                            <h4>Tilausprosessin vaiheet</h4>
                            <ol>
                                <li>Verkkotilaus ja maksun vahvistus</li>
                                <li>AnomFIN toimitussuunnitelma 24h sis√§ll√§</li>
                                <li>K√§ytt√∂√∂notto ja koulutus paikan p√§√§ll√§</li>
                            </ol>
                        </div>
                    </div>
                    <footer class="storefront__footer">
                        <p>Tarvitsetko laskutusta tai leasing-pakettia? Concierge-tiimi rakentaa yrityssopimuksen saman p√§iv√§n aikana.</p>
                        <a class="storefront__footer-link" href="tel:+358401234567">üìû Soita AnomFIN Concierge -linjalle</a>
                    </footer>
                </aside>
            </main>
        </div>
    </div>

    <style>
        /* Kuittitulostuksen tyylit */
        .checkout-receipt-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }
        
        .checkout-receipt-actions .btn {
            flex: 1;
        }
        
        /* Tulostusalue (piilotettu) */
        .receipt-print-area {
            display: none;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-line;
            max-width: 400px;
            margin: 0 auto;
        }
        
        @media print {
            body * {
                visibility: hidden;
            }
            
            .receipt-print-area, .receipt-print-area * {
                visibility: visible;
            }
            
            .receipt-print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                display: block !important;
            }
            
            @page {
                margin: 0.5in;
                size: auto;
            }
        }
    </style>

    <div class="receipt-print-area" id="receiptPrintArea"></div>

    <!-- Kuittihistoria-modaali -->
    <div id="kuittiHistoriaModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìö Kuittihistoria</h2>
                <button class="modal-close" onclick="suljeModaali('kuittiHistoriaModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div id="kuittiHistoriaLista"></div>
            </div>
        </div>
    </div>

    <!-- Mallipohja-modaali -->
    <div id="mallipohjatModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Kuittipohjat</h2>
                <button class="modal-close" onclick="suljeModaali('mallipohjatModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="template-actions">
                    <button class="btn btn--primary" onclick="lisaaMallipohja()">‚ûï Lis√§√§ uusi pohja</button>
                </div>
                <div id="mallipohjatLista"></div>
            </div>
        </div>
    </div>

    <!-- ASCII-ty√∂kalu-modaali -->
    <div id="asciiTyokaluModal" class="modal-overlay" style="display: none;">
        <div class="modal-content modal-content--wide">
            <div class="modal-header">
                <h2>üé® ASCII Logo Generator</h2>
                <button class="modal-close" onclick="suljeModaali('asciiTyokaluModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="ascii-tool">
                    <label>
                        Teksti:
                        <input type="text" id="asciiInput" placeholder="HRK" maxlength="20">
                    </label>
                    <label>
                        Tyyli:
                        <select id="asciiStyle">
                            <option value="standard">Standard</option>
                            <option value="slant">Slant</option>
                            <option value="banner">Banner</option>
                            <option value="big">Big</option>
                            <option value="block">Block</option>
                            <option value="bubble">Bubble</option>
                            <option value="digital">Digital</option>
                            <option value="ivrit">Ivrit</option>
                            <option value="lean">Lean</option>
                            <option value="mini">Mini</option>
                            <option value="script">Script</option>
                            <option value="shadow">Shadow</option>
                            <option value="small">Small</option>
                            <option value="smscript">SM Script</option>
                            <option value="smshadow">SM Shadow</option>
                            <option value="smslant">SM Slant</option>
                        </select>
                    </label>
                    <div class="formatting-options">
                        <label>
                            <input type="checkbox" id="boldText"> <strong>Lihavointi (Bold)</strong>
                        </label>
                        <label>
                            Fontti:
                            <select id="fontFamily">
                                <option value="monospace">Monospace</option>
                                <option value="courier">Courier New</option>
                                <option value="arial">Arial</option>
                                <option value="times">Times New Roman</option>
                                <option value="verdana">Verdana</option>
                            </select>
                        </label>
                        <label>
                            Tekstin koko:
                            <select id="fontSize">
                                <option value="8">8px</option>
                                <option value="10" selected>10px</option>
                                <option value="12">12px</option>
                                <option value="14">14px</option>
                                <option value="16">16px</option>
                                <option value="18">18px</option>
                                <option value="20">20px</option>
                            </select>
                        </label>
                    </div>
                    <button class="btn btn--primary" onclick="generoiAscii()">Generoi</button>
                    <div class="ascii-preview">
                        <pre id="asciiPreview" style="font-family: monospace; font-size: 10px; line-height: 1.2;"></pre>
                    </div>
                    <button class="btn btn--secondary" onclick="kopioiAscii()">üìã Kopioi ASCII</button>
                    <button class="btn btn--secondary" onclick="tallennaAsciiLogoksi()">üíæ Tallenna logoksi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Viivakoodi-modaali -->
    <div id="viivakoodiModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Viivakoodi Generator</h2>
                <button class="modal-close" onclick="suljeModaali('viivakoodiModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="barcode-tool">
                    <label>
                        Tilausnumero / Tuotekoodi:
                        <input type="text" id="barcodeInput" placeholder="123456789012" maxlength="20">
                    </label>
                    <button class="btn btn--primary" onclick="generoiViivakoodi()">Generoi viivakoodi</button>
                    <div class="barcode-preview">
                        <canvas id="barcodeCanvas" style="max-width: 100%;"></canvas>
                    </div>
                    <button class="btn btn--secondary" onclick="tallennaViivakoodi()">üíæ Tallenna kuittiin</button>
                    <p style="margin-top: 15px; font-size: 14px; color: #6c757d;">
                        Viivakoodi tallennetaan automaattisesti kaikkiin kuitteihin.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Modal-tyylit */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-content--wide {
            max-width: 900px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 24px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 32px;
            cursor: pointer;
            color: #6c757d;
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
        }

        .modal-close:hover {
            color: #e74c3c;
        }

        .modal-body {
            padding: 30px;
        }

        /* Kuittihistoria */
        .history-item {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }

        .history-item:hover {
            background: #e9ecef;
            cursor: pointer;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .history-item-title {
            font-weight: bold;
            font-size: 16px;
        }

        .history-item-date {
            color: #6c757d;
            font-size: 14px;
        }

        .history-item-info {
            font-size: 14px;
            color: #495057;
        }

        .history-item-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        /* Mallipohjat */
        .template-actions {
            margin-bottom: 20px;
        }

        .template-item {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }

        .template-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .template-item-name {
            font-weight: bold;
            font-size: 16px;
        }

        .template-item-actions {
            display: flex;
            gap: 10px;
        }

        /* ASCII-ty√∂kalu */
        .ascii-tool label {
            display: block;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .ascii-tool input,
        .ascii-tool select {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
        }

        .formatting-options {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .formatting-options label {
            margin-bottom: 10px;
        }

        .formatting-options input[type="checkbox"] {
            width: auto;
            display: inline;
            margin-right: 5px;
        }

        /* Viivakoodi-ty√∂kalu */
        .barcode-tool label {
            display: block;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .barcode-tool input {
            display: block;
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
        }

        .barcode-preview {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ascii-preview {
            margin: 20px 0;
            padding: 20px;
            background: #2c3e50;
            color: #00ff00;
            border-radius: 8px;
            overflow-x: auto;
            min-height: 150px;
        }

        .ascii-preview pre {
            margin: 0;
            white-space: pre;
        }

        .btn--secondary {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn--secondary:hover {
            background: #5a6268;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-3fpCfGo3nKpSybLu7saEh8GZ4HzyBbs596k8ZZrPmPo=" crossorigin="anonymous"></script>
    <script type="module" src="assets/js/main.js"></script>
    
    <script>
        // ========== KUITTITULOSTUS TOIMINNALLISUUS ==========
        
        // Globaalit muuttujat tilaustiedoille
        let viimeisinTilaus = null;
        
        // Kuuntele checkout-formin l√§hetyst√§ ja tallenna tiedot
        document.addEventListener('DOMContentLoaded', function() {
            const checkoutForm = document.querySelector('[data-checkout-form]');
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', function(e) {
                    // Tallenna tilaustiedot ennen l√§hetyst√§
                    const formData = new FormData(e.target);
                    viimeisinTilaus = {
                        yritys: formData.get('company'),
                        ytunnus: formData.get('businessId'),
                        yhteyshenkil√∂: formData.get('contact'),
                        email: formData.get('email'),
                        puhelin: formData.get('phone'),
                        kunta: formData.get('city'),
                        toimitusaika: formData.get('deliveryWindow'),
                        lis√§tiedot: formData.get('notes'),
                        aikaleima: new Date(),
                        tilauksNumero: 'HRK' + Date.now().toString().slice(-6)
                    };
                });
            }
        });
        
        // Muodosta kuittiteksti
        function muodostaTilausKuitti() {
            if (!viimeisinTilaus) {
                return 'Ei tilaustietoja saatavilla.';
            }
            
            const pvm = viimeisinTilaus.aikaleima.toLocaleDateString('fi-FI', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // K√§yt√§ custom logoa jos saatavilla
            let logo = haeCustomLogo();
            if (!logo) {
                logo = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                           ‚ïë
‚ïë    ‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ïë
‚ïë    ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù   ‚ïë
‚ïë                           ‚ïë
‚ïë Helsinki eBike-Service Oy ‚ïë
‚ïë                           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;
            }
            
            let kuitti = logo

Helsinki eBike-Service Oy
S√§hk√∂py√∂rien maahantuoja
www.helsinki-ebike-service.fi
Y-tunnus: 1234567-8

==================================================
TILAUSVAHVISTUS #${viimeisinTilaus.tilauksNumero}
${pvm}
==================================================

ASIAKASTIEDOT:
Yritys/Organisaatio: ${viimeisinTilaus.yritys}
Y-tunnus: ${viimeisinTilaus.ytunnus}
Yhteyshenkil√∂: ${viimeisinTilaus.yhteyshenkil√∂}
S√§hk√∂posti: ${viimeisinTilaus.email}
Puhelin: ${viimeisinTilaus.puhelin}
Toimituskunta: ${viimeisinTilaus.kunta}

TOIMITUS:
Toimitusaikatoive: ${viimeisinTilaus.toimitusaika}

`;

            if (viimeisinTilaus.lis√§tiedot) {
                kuitti += `LIS√ÑTIEDOT:\n${viimeisinTilaus.lis√§tiedot}\n\n`;
            }

            // Hae ostoskori (jos saatavilla)
            const cartItems = document.querySelectorAll('[data-cart-items] li');
            if (cartItems.length > 0) {
                kuitti += `TILATUT TUOTTEET:\n`;
                kuitti += `${'Tuote'.padEnd(30)} ${'M√§√§r√§'.padStart(8)} ${'Hinta'.padStart(12)}\n`;
                kuitti += '-'.repeat(50) + '\n';
                
                cartItems.forEach(item => {
                    const name = item.querySelector('.storefront__cart-item-name')?.textContent || 'Tuntematon tuote';
                    const qty = item.querySelector('.storefront__cart-item-qty')?.textContent || '1';
                    const price = item.querySelector('.storefront__cart-item-price')?.textContent || '0 ‚Ç¨';
                    
                    const shortName = name.length > 30 ? name.substring(0, 27) + '...' : name;
                    kuitti += `${shortName.padEnd(30)} ${qty.padStart(8)} ${price.padStart(12)}\n`;
                });
                
                const total = document.querySelector('[data-cart-total]')?.textContent || '0 ‚Ç¨';
                kuitti += '-'.repeat(50) + '\n';
                kuitti += `${'V√ÑLISUMMA (ALV 0%):'.padEnd(38)} ${total.padStart(12)}\n`;
                kuitti += '='.repeat(50) + '\n';
            }

            // Generoi ja lis√§√§ maksutiedot
            const maksutiedot = generoiMaksutiedot();
            kuitti += `
MAKSUTIEDOT:
${maksutiedot.tyyppi === 'kortti' ? 
    `Maksukortti: **** **** **** ${maksutiedot.kortinNumero}
Kortinomistaja: ${maksutiedot.kortinOmistaja}
Voimassa: ${maksutiedot.voimassaolo}
Maksup√§iv√§: ${maksutiedot.maksupvm}
Valtuutuskoodi: ${maksutiedot.valtuutuskoodi}` :
    `Pankkimaksu: ${maksutiedot.pankki}
Maksuviite: ${maksutiedot.viite}
Maksup√§iv√§: ${maksutiedot.maksupvm}
Tilitapahtuma: ${maksutiedot.tapahtuma}`
}

`;

            kuitti += `
SEURAAVAT VAIHEET:
1. AnomFIN Concierge ottaa yhteytt√§ 24h sis√§ll√§
2. Toimitussuunnitelma ja tarjous
3. Sopimuksen allekirjoitus
4. Tuotanto ja toimitus
5. Asennus ja k√§ytt√∂√∂notto

YHTEYSTIEDOT:
AnomFIN Concierge: +358 40 123 4567
S√§hk√∂posti: concierge@anomfin.fi
Verkkosivu: www.helsinki-ebike-service.fi

Kiitos tilauksestanne!

Tilausnumero: #${viimeisinTilaus.tilauksNumero}
K√§sitelty: Web-verkkokauppa
Aika: ${viimeisinTilaus.aikaleima.toISOString()}

Helsinki eBike-Service Oy
Corporate Mobility Partner Program

`;
            return kuitti;
        }
        
        // Tulosta kuitti
        function tulostaKuitti() {
            try {
                const kuittiteksti = muodostaTilausKuitti();
                
                // Luo uusi ikkuna tulostusta varten
                const tulostusIkkuna = window.open('', 'TilausKuitti', 'width=700,height=900,scrollbars=yes');
                
                if (!tulostusIkkuna) {
                    alert('Ponnahdusikkunan avaaminen estettiin. Salli ponnahdusikkunat ja yrit√§ uudelleen.');
                    return;
                }

                // Kirjoita kuitti ikkunaan
                tulostusIkkuna.document.write(`
<!DOCTYPE html>
<html>
<head>
    <title>Helsinki eBike-Service - Tilausvahvistus #${viimeisinTilaus ? viimeisinTilaus.tilauksNumero : 'XXXX'}</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 20px;
            white-space: pre-line;
        }
        @media print {
            body { margin: 0; }
            @page { margin: 0.5in; }
        }
        .print-actions {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border: 2px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .print-actions button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-weight: bold;
        }
        .print-btn {
            background: #007bff;
            color: white;
        }
        .close-btn {
            background: #6c757d;
            color: white;
        }
        @media print {
            .print-actions { display: none; }
        }
    </style>
</head>
<body>
    <div class="print-actions">
        <button class="print-btn" onclick="window.print()">üñ®Ô∏è Tulosta</button>
        <button class="close-btn" onclick="window.close()">‚úï Sulje</button>
    </div>
    <div>${kuittiteksti}</div>
</body>
</html>`);
                
                tulostusIkkuna.document.close();
                tulostusIkkuna.focus();
                
                // N√§yt√§ onnistumisilmoitus
                setTimeout(() => {
                    if (typeof $ !== 'undefined') {
                        // Jos jQuery on k√§ytett√§viss√§, k√§yt√§ sit√§ ilmoitukseen
                        $('body').append('<div style="position: fixed; top: 20px; right: 20px; background: #28a745; color: white; padding: 15px 20px; border-radius: 8px; font-weight: bold; z-index: 9999;">‚úÖ Kuitti-ikkuna avattu! Paina üñ®Ô∏è Tulosta nappia ikkunassa.</div>');
                        setTimeout(() => $('body > div:last').fadeOut(2000, function() { $(this).remove(); }), 3000);
                    }
                }, 500);
                
            } catch (error) {
                console.error('Tulostusvirhe:', error);
                alert('Kuitin tulostus ep√§onnistui: ' + error.message + '\n\nYrit√§ ladata PDF-versio.');
            }
        }

        // Lataa tilauksen kuitti PDF:n√§ (yksinkertainen teksti-tiedosto)
        function lataaTilausKuitti() {
            try {
                const kuittiteksti = muodostaTilausKuitti();
                const blob = new Blob([kuittiteksti], { type: 'text/plain;charset=utf-8' });
                
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Helsinki_eBike_Tilausvahvistus_${viimeisinTilaus ? viimeisinTilaus.tilauksNumero : 'UNKNOWN'}_${new Date().toISOString().slice(0,10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // N√§yt√§ onnistumisilmoitus
                if (typeof $ !== 'undefined') {
                    $('body').append('<div style="position: fixed; top: 20px; right: 20px; background: #17a2b8; color: white; padding: 15px 20px; border-radius: 8px; font-weight: bold; z-index: 9999;">üìÑ Tilausvahvistus ladattu! Avaa tiedosto ja tulosta Ctrl+P.</div>');
                    setTimeout(() => $('body > div:last').fadeOut(2000, function() { $(this).remove(); }), 3000);
                }
                
            } catch (error) {
                console.error('Latausvirhe:', error);
                alert('Kuitin lataus ep√§onnistui: ' + error.message);
            }
        }
        
        // N√§pp√§inkomennot
        document.addEventListener('keydown', function(e) {
            // Ctrl+P tulostaa kuitin jos tilausvahvistus on n√§kyviss√§
            if (e.ctrlKey && e.key === 'p') {
                const confirmation = document.querySelector('[data-checkout-confirmation]');
                if (confirmation && !confirmation.hidden) {
                    e.preventDefault();
                    tulostaKuitti();
                }
            }
            // ESC sulkee modaalit
            if (e.key === 'Escape') {
                suljeKaikkiModaalit();
            }
        });
        
        // ========== UUDET OMINAISUUDET ==========
        
        // LocalStorage-avaimet
        const KUITIT_KEY = 'hrk-kuittihistoria';
        const MALLIPOHJAT_KEY = 'hrk-mallipohjat';
        const CUSTOM_LOGO_KEY = 'hrk-custom-logo';
        
        // ========== 1. KUITTIHISTORIA ==========
        
        // Tallenna kuitti historiaan
        function tallennaKuittiHistoriaan() {
            if (!viimeisinTilaus) return;
            
            // Hae ostoskori
            const cartItems = [];
            document.querySelectorAll('[data-cart-items] li').forEach(item => {
                const name = item.querySelector('.storefront__cart-item-name')?.textContent || '';
                const qty = item.querySelector('.storefront__cart-item-qty')?.textContent || '1';
                const price = item.querySelector('.storefront__cart-item-price')?.textContent || '0 ‚Ç¨';
                if (name) {
                    cartItems.push({ name, qty, price });
                }
            });
            
            const total = document.querySelector('[data-cart-total]')?.textContent || '0 ‚Ç¨';
            
            // Generoi maksutiedot
            const maksutiedot = generoiMaksutiedot();
            
            const kuitti = {
                ...viimeisinTilaus,
                aikaleima: viimeisinTilaus.aikaleima.toISOString(),
                tuotteet: cartItems,
                yhteensa: total,
                maksutiedot: maksutiedot
            };
            
            let historia = [];
            try {
                const stored = localStorage.getItem(KUITIT_KEY);
                if (stored) {
                    historia = JSON.parse(stored);
                }
            } catch (e) {
                console.error('Historian lataus ep√§onnistui:', e);
            }
            
            historia.unshift(kuitti);
            
            // S√§ilyt√§ max 50 viimeisint√§ kuittia
            if (historia.length > 50) {
                historia = historia.slice(0, 50);
            }
            
            try {
                localStorage.setItem(KUITIT_KEY, JSON.stringify(historia));
            } catch (e) {
                console.error('Historian tallennus ep√§onnistui:', e);
            }
        }
        
        // N√§yt√§ kuittihistoria
        function naytaKuittiHistoria() {
            const modal = document.getElementById('kuittiHistoriaModal');
            const lista = document.getElementById('kuittiHistoriaLista');
            
            let historia = [];
            try {
                const stored = localStorage.getItem(KUITIT_KEY);
                if (stored) {
                    historia = JSON.parse(stored);
                }
            } catch (e) {
                console.error('Historian lataus ep√§onnistui:', e);
            }
            
            if (historia.length === 0) {
                lista.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üì≠</div><p>Ei tallennettuja kuitteja</p></div>';
            } else {
                lista.innerHTML = historia.map((kuitti, index) => {
                    const date = new Date(kuitti.aikaleima);
                    const dateStr = date.toLocaleDateString('fi-FI', { 
                        day: '2-digit', 
                        month: '2-digit', 
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    return `
                        <div class="history-item">
                            <div class="history-item-header">
                                <div class="history-item-title">Tilaus #${kuitti.tilauksNumero}</div>
                                <div class="history-item-date">${dateStr}</div>
                            </div>
                            <div class="history-item-info">
                                ${kuitti.yritys} ‚Ä¢ ${kuitti.yhteensa}
                            </div>
                            <div class="history-item-actions">
                                <button class="btn btn--secondary" onclick="naytaKuitinTiedot(${index})">üëÅÔ∏è N√§yt√§</button>
                                <button class="btn btn--secondary" onclick="tulostaVanhaKuitti(${index})">üñ®Ô∏è Tulosta</button>
                                <button class="btn btn--secondary" onclick="poistaKuitti(${index})">üóëÔ∏è Poista</button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            modal.style.display = 'flex';
        }
        
        // N√§yt√§ kuitin tiedot
        function naytaKuitinTiedot(index) {
            let historia = [];
            try {
                const stored = localStorage.getItem(KUITIT_KEY);
                if (stored) {
                    historia = JSON.parse(stored);
                }
            } catch (e) {
                return;
            }
            
            if (index >= historia.length) return;
            
            const kuitti = historia[index];
            const teksti = muodostaKuittiHistoriasta(kuitti);
            
            const ikkuna = window.open('', 'KuittiTiedot', 'width=700,height=900,scrollbars=yes');
            if (!ikkuna) {
                alert('Ponnahdusikkunan avaaminen estettiin.');
                return;
            }
            
            ikkuna.document.write(`
<!DOCTYPE html>
<html>
<head>
    <title>Kuitti #${kuitti.tilauksNumero}</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 20px;
            white-space: pre-line;
        }
        .close-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <button class="close-btn" onclick="window.close()">‚úï Sulje</button>
    <div>${teksti}</div>
</body>
</html>`);
            
            ikkuna.document.close();
        }
        
        // Tulosta vanha kuitti
        function tulostaVanhaKuitti(index) {
            let historia = [];
            try {
                const stored = localStorage.getItem(KUITIT_KEY);
                if (stored) {
                    historia = JSON.parse(stored);
                }
            } catch (e) {
                return;
            }
            
            if (index >= historia.length) return;
            
            const kuitti = historia[index];
            const teksti = muodostaKuittiHistoriasta(kuitti);
            
            const ikkuna = window.open('', 'TulostaKuitti', 'width=700,height=900');
            if (!ikkuna) {
                alert('Ponnahdusikkunan avaaminen estettyi.');
                return;
            }
            
            ikkuna.document.write(`
<!DOCTYPE html>
<html>
<head>
    <title>Tulosta kuitti #${kuitti.tilauksNumero}</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            font-size: 12px; 
            line-height: 1.4; 
            margin: 20px;
            white-space: pre-line;
        }
        @media print {
            body { margin: 0; }
            @page { margin: 0.5in; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class="no-print" style="margin-bottom: 20px;">
        <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">üñ®Ô∏è Tulosta</button>
        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-left: 10px;">‚úï Sulje</button>
    </div>
    <div>${teksti}</div>
</body>
</html>`);
            
            ikkuna.document.close();
        }
        
        // Poista kuitti
        function poistaKuitti(index) {
            if (!confirm('Haluatko varmasti poistaa t√§m√§n kuitin?')) return;
            
            let historia = [];
            try {
                const stored = localStorage.getItem(KUITIT_KEY);
                if (stored) {
                    historia = JSON.parse(stored);
                }
            } catch (e) {
                return;
            }
            
            historia.splice(index, 1);
            
            try {
                localStorage.setItem(KUITIT_KEY, JSON.stringify(historia));
                naytaKuittiHistoria(); // P√§ivit√§ n√§kym√§
            } catch (e) {
                console.error('Kuitin poisto ep√§onnistui:', e);
            }
        }
        
        // Muodosta kuitti historiasta
        function muodostaKuittiHistoriasta(kuitti) {
            const date = new Date(kuitti.aikaleima);
            const pvm = date.toLocaleDateString('fi-FI', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // K√§yt√§ custom logoa jos saatavilla
            let logo = haeCustomLogo();
            if (!logo) {
                logo = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                           ‚ïë
‚ïë    ‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ïë
‚ïë    ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ïë
‚ïë    ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù   ‚ïë
‚ïë                           ‚ïë
‚ïë Helsinki eBike-Service Oy ‚ïë
‚ïë                           ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù`;
            }
            
            let teksti = logo + `

Helsinki eBike-Service Oy
S√§hk√∂py√∂rien maahantuoja
www.helsinki-ebike-service.fi
Y-tunnus: 1234567-8

==================================================
TILAUSVAHVISTUS #${kuitti.tilauksNumero}
${pvm}
==================================================

ASIAKASTIEDOT:
Yritys/Organisaatio: ${kuitti.yritys}
Y-tunnus: ${kuitti.ytunnus}
Yhteyshenkil√∂: ${kuitti.yhteyshenkil√∂}
S√§hk√∂posti: ${kuitti.email}
Puhelin: ${kuitti.puhelin}
Toimituskunta: ${kuitti.kunta}

TOIMITUS:
Toimitusaikatoive: ${kuitti.toimitusaika}

`;

            if (kuitti.lis√§tiedot) {
                teksti += `LIS√ÑTIEDOT:\n${kuitti.lis√§tiedot}\n\n`;
            }

            if (kuitti.tuotteet && kuitti.tuotteet.length > 0) {
                teksti += `TILATUT TUOTTEET:\n`;
                teksti += `${'Tuote'.padEnd(30)} ${'M√§√§r√§'.padStart(8)} ${'Hinta'.padStart(12)}\n`;
                teksti += '-'.repeat(50) + '\n';
                
                kuitti.tuotteet.forEach(item => {
                    const shortName = item.name.length > 30 ? item.name.substring(0, 27) + '...' : item.name;
                    teksti += `${shortName.padEnd(30)} ${item.qty.padStart(8)} ${item.price.padStart(12)}\n`;
                });
                
                teksti += '-'.repeat(50) + '\n';
                teksti += `${'V√ÑLISUMMA (ALV 0%):'.padEnd(38)} ${kuitti.yhteensa.padStart(12)}\n`;
                teksti += '='.repeat(50) + '\n';
            }

            // Lis√§√§ maksutiedot
            if (kuitti.maksutiedot) {
                teksti += `
MAKSUTIEDOT:
${kuitti.maksutiedot.tyyppi === 'kortti' ? 
    `Maksukortti: **** **** **** ${kuitti.maksutiedot.kortinNumero}
Kortinomistaja: ${kuitti.maksutiedot.kortinOmistaja}
Korttityyppi: ${kuitti.maksutiedot.korttiTyyppi || 'Visa'}
Voimassa: ${kuitti.maksutiedot.voimassaolo}
Maksup√§iv√§: ${kuitti.maksutiedot.maksupvm}
Valtuutuskoodi: ${kuitti.maksutiedot.valtuutuskoodi}
${kuitti.maksutiedot.sovellus ? `Sovellus: ${kuitti.maksutiedot.sovellus}` : ''}
${kuitti.maksutiedot.tapNro ? `Tap.nro/Varmennus: ${kuitti.maksutiedot.tapNro} / ${kuitti.maksutiedot.varmennus}` : ''}
${kuitti.maksutiedot.yritys ? `Yritys: ${kuitti.maksutiedot.yritys}` : ''}
${kuitti.maksutiedot.ala ? `Ala: ${kuitti.maksutiedot.ala}` : ''}
${kuitti.maksutiedot.viite ? `Viite: ${kuitti.maksutiedot.viite}` : ''}
${kuitti.maksutiedot.maksutyyppi ? `Maksutyyppi: ${kuitti.maksutiedot.maksutyyppi}` : ''}
${kuitti.maksutiedot.maksutapa ? `Maksutapa: ${kuitti.maksutiedot.maksutapa}` : ''}` :
    `Pankkimaksu: ${kuitti.maksutiedot.pankki}
Maksuviite: ${kuitti.maksutiedot.viite}
Maksup√§iv√§: ${kuitti.maksutiedot.maksupvm}
Tilitapahtuma: ${kuitti.maksutiedot.tapahtuma}`
}

`;
            }

            // Lis√§√§ ALV-vaihtoehdot ja viivakoodi
            teksti += `
ALV-TIEDOT:
K√§ytett√§viss√§ ALV-kannat: 0%, 10%, 14%, 25,5%
T√§m√§ kuitti: ALV 0% (yrityskauppa)

VIIVAKOODI:
${haeViivakoodi() || '||||| |||| | |||| ||||| || | ||||| || ||||'}

`;

            teksti += `
SEURAAVAT VAIHEET:
1. AnomFIN Concierge ottaa yhteytt√§ 24h sis√§ll√§
2. Toimitussuunnitelma ja tarjous
3. Sopimuksen allekirjoitus
4. Tuotanto ja toimitus
5. Asennus ja k√§ytt√∂√∂notto

YHTEYSTIEDOT:
AnomFIN Concierge: +358 40 123 4567
S√§hk√∂posti: concierge@anomfin.fi
Verkkosivu: www.helsinki-ebike-service.fi

==================================================
PALAUTUSEHDOT JA TAKUU
==================================================

PALAUTUSOIKEUS (Kuluttajakauppa):
‚Ä¢ 14 vuorokauden palautusoikeus ostop√§iv√§st√§
‚Ä¢ Tuote on oltava k√§ytt√§m√§tt√∂m√§ss√§ kunnossa
‚Ä¢ Alkuper√§ispakkaus s√§ilytett√§v√§
‚Ä¢ Palautuskulut ostajan vastuulla

VAIHTO-OIKEUS:
‚Ä¢ 14 vuorokauden vaihto-oikeus
‚Ä¢ Vaihdettava tuote on oltava myyntikuntoinen
‚Ä¢ Voidaan vaihtaa samanarvo tuote tai palauttaa

TAKUU:
‚Ä¢ Valmistajan takuu 24 kk (kuluttajakauppa)
‚Ä¢ Yrityskauppa: sopimuskohtainen takuu
‚Ä¢ Takuu ei kata normaalia kulumista
‚Ä¢ Huolto-ohjelman mukaiset huollot s√§ilytt√§v√§t takuun

MYYNTIKUNTA:
‚Ä¢ Tuotteiden on oltava myyntikunnossa palautettaessa
‚Ä¢ Testattavissa oleva kunto hyv√§ksyt√§√§n
‚Ä¢ Vaurioituneet tuotteet eiv√§t kelpaa palautukseen
‚Ä¢ Asiakaspalvelu arvioi palautuskelpoisuuden

AUKIOLOAJAT:
Arkisin: 8:00 - 15:00
Muina aikoina: Sovittaessa
Yhteystiedot: +358 40 123 4567

==================================================

Kiitos tilauksestanne!

Tilausnumero: #${kuitti.tilauksNumero}
K√§sitelty: Web-verkkokauppa
Aika: ${kuitti.aikaleima}

Helsinki eBike-Service Oy
Corporate Mobility Partner Program
Y-tunnus: 1234567-8

`;
            return teksti;
        }
        
        // ========== 2. MALLIPOHJAT ==========
        
        // Oletusmallipohjat
        const OLETUSMALLIPOHJAT = [
            {
                id: 'perus',
                nimi: 'Perus',
                kuvaus: 'Peruspohja ilman lis√§ominaisuuksia',
                logo: null,
                footer: 'Kiitos tilauksesta!'
            },
            {
                id: 'premium',
                nimi: 'Premium',
                kuvaus: 'Premium-pohja lis√§tiedoilla',
                logo: null,
                footer: 'Premium-palvelu ‚Ä¢ Kiitos tilauksesta!'
            },
            {
                id: 'yritys',
                nimi: 'Yritysasiakas',
                kuvaus: 'Erikoispohja yritysasiakkaille',
                logo: null,
                footer: 'B2B Excellence ‚Ä¢ Kiitos yhteisty√∂st√§!'
            }
        ];
        
        // Hae mallipohjat
        function haeMallipohjat() {
            try {
                const stored = localStorage.getItem(MALLIPOHJAT_KEY);
                if (stored) {
                    return JSON.parse(stored);
                }
            } catch (e) {
                console.error('Mallipohjen lataus ep√§onnistui:', e);
            }
            
            // Palauta oletuspohjat jos ei tallennettuja
            return [...OLETUSMALLIPOHJAT];
        }
        
        // Tallenna mallipohjat
        function tallennaMallipohjat(pohjat) {
            try {
                localStorage.setItem(MALLIPOHJAT_KEY, JSON.stringify(pohjat));
            } catch (e) {
                console.error('Mallipohjen tallennus ep√§onnistui:', e);
            }
        }
        
        // N√§yt√§ mallipohjavalikkp
        function naytaMallipohjaValikko() {
            const modal = document.getElementById('mallipohjatModal');
            const lista = document.getElementById('mallipohjatLista');
            
            const pohjat = haeMallipohjat();
            
            lista.innerHTML = pohjat.map((pohja, index) => `
                <div class="template-item">
                    <div class="template-item-header">
                        <div class="template-item-name">${pohja.nimi}</div>
                        <div class="template-item-actions">
                            <button class="btn btn--secondary" onclick="muokkaaMallipohjaa(${index})">‚úèÔ∏è Muokkaa</button>
                            ${!pohja.id.startsWith('oletuspohja-') ? 
                                `<button class="btn btn--secondary" onclick="poistaMallipohja(${index})">üóëÔ∏è Poista</button>` : 
                                ''}
                        </div>
                    </div>
                    <div style="color: #6c757d; font-size: 14px;">${pohja.kuvaus}</div>
                </div>
            `).join('');
            
            modal.style.display = 'flex';
        }
        
        // Lis√§√§ mallipohja
        function lisaaMallipohja() {
            const nimi = prompt('Anna mallipohjan nimi:');
            if (!nimi) return;
            
            const kuvaus = prompt('Anna kuvaus:') || '';
            
            const pohjat = haeMallipohjat();
            pohjat.push({
                id: 'custom-' + Date.now(),
                nimi: nimi,
                kuvaus: kuvaus,
                logo: null,
                footer: 'Kiitos tilauksesta!'
            });
            
            tallennaMallipohjat(pohjat);
            naytaMallipohjaValikko();
            
            alert('Mallipohja lis√§tty!');
        }
        
        // Muokkaa mallipohjaa
        function muokkaaMallipohjaa(index) {
            const pohjat = haeMallipohjat();
            if (index >= pohjat.length) return;
            
            const pohja = pohjat[index];
            
            const uusiNimi = prompt('Nimi:', pohja.nimi);
            if (uusiNimi === null) return;
            
            const uusiKuvaus = prompt('Kuvaus:', pohja.kuvaus);
            if (uusiKuvaus === null) return;
            
            const uusiFooter = prompt('Alareuna:', pohja.footer);
            if (uusiFooter === null) return;
            
            pohja.nimi = uusiNimi || pohja.nimi;
            pohja.kuvaus = uusiKuvaus || pohja.kuvaus;
            pohja.footer = uusiFooter || pohja.footer;
            
            tallennaMallipohjat(pohjat);
            naytaMallipohjaValikko();
            
            alert('Mallipohja p√§ivitetty!');
        }
        
        // Poista mallipohja
        function poistaMallipohja(index) {
            if (!confirm('Haluatko varmasti poistaa t√§m√§n mallipohjan?')) return;
            
            const pohjat = haeMallipohjat();
            pohjat.splice(index, 1);
            
            tallennaMallipohjat(pohjat);
            naytaMallipohjaValikko();
        }
        
        // ========== 3. ASCII LOGO GENERATOR ==========
        
        // ASCII-fontit (yksinkertaistettu versio)
        const ASCII_FONTS = {
            standard: {
                'H': ['  _    _  ', ' | |  | | ', ' | |__| | ', ' |  __  | ', ' | |  | | ', ' |_|  |_| '],
                'R': ['  _____  ', ' |  __ \\ ', ' | |__) |', ' |  _  / ', ' | | \\ \\ ', ' |_|  \\_\\'],
                'K': ['  _  __', ' | |/ /', ' |   / ', ' |  \\ \\ ', ' | |\\ \\', ' |_| \\_\\'],
            },
            big: {
                'H': [' _    _  ', '| |  | | ', '| |__| | ', '|  __  | ', '| |  | | ', '|_|  |_| '],
                'R': [' ______  ', '|  _ \\ \\ ', '| |_) | |', '|  _ <  |', '| |_) | |', '|____/|_|'],
                'K': [' _  __', '| |/ /', '|   < ', '| |\\ \\', '|_| \\_\\', '       '],
            },
            block: {
                'H': ['‚ñà   ‚ñà', '‚ñà   ‚ñà', '‚ñà‚ñà‚ñà‚ñà‚ñà', '‚ñà   ‚ñà', '‚ñà   ‚ñà', '‚ñà   ‚ñà'],
                'R': ['‚ñà‚ñà‚ñà‚ñà ', '‚ñà   ‚ñà', '‚ñà‚ñà‚ñà‚ñà ', '‚ñà  ‚ñà ', '‚ñà   ‚ñà', '‚ñà   ‚ñà'],
                'K': ['‚ñà   ‚ñà', '‚ñà  ‚ñà ', '‚ñà‚ñà‚ñà  ', '‚ñà  ‚ñà ', '‚ñà   ‚ñà', '‚ñà   ‚ñà'],
            }
        };
        
        // Generoi ASCII-teksti
        function generoiAscii() {
            const input = document.getElementById('asciiInput').value.toUpperCase();
            const style = document.getElementById('asciiStyle').value;
            const preview = document.getElementById('asciiPreview');
            const bold = document.getElementById('boldText')?.checked || false;
            const fontFamily = document.getElementById('fontFamily')?.value || 'monospace';
            const fontSize = document.getElementById('fontSize')?.value || '10';
            
            if (!input) {
                preview.textContent = 'Anna teksti yll√§olevaan kentt√§√§n...';
                return;
            }
            
            // Yksinkertainen ASCII-generaattori
            let result = '';
            
            if (style === 'block') {
                // Block-tyyli
                const lines = ['', '', '', '', '', ''];
                for (let char of input) {
                    if (ASCII_FONTS.block[char]) {
                        for (let i = 0; i < 6; i++) {
                            lines[i] += ASCII_FONTS.block[char][i] + ' ';
                        }
                    } else {
                        for (let i = 0; i < 6; i++) {
                            lines[i] += '    ';
                        }
                    }
                }
                result = lines.join('\n');
            } else if (style === 'banner') {
                // Banner-tyyli
                result = `
‚ïî${'‚ïê'.repeat(input.length * 4)}‚ïó
‚ïë  ${input.split('').map(c => c + '  ').join('')}‚ïë
‚ïö${'‚ïê'.repeat(input.length * 4)}‚ïù`;
            } else if (style === 'bubble') {
                // Bubble-tyyli
                result = input.split('').map(c => `(${c})`).join(' ');
            } else if (style === 'digital') {
                // Digital-tyyli
                const digital = {
                    'H': '|_|',
                    'R': '|¬≤',
                    'K': '|<',
                    'A': '/\\',
                    'B': '|¬≥',
                    'C': '(',
                    'D': '|)',
                    'E': '[-',
                    'F': '|=',
                    'G': '(_+',
                    'I': '|',
                    'J': '_|',
                    'L': '|_',
                    'M': '|\\/|',
                    'N': '|\\|',
                    'O': '()',
                    'P': '|¬≤',
                    'Q': '()_',
                    'S': '$',
                    'T': '‚Ä†',
                    'U': '|_|',
                    'V': '\\/',
                    'W': '\\/\\/',
                    'X': '><',
                    'Y': '¬•',
                    'Z': 'Z',
                };
                result = input.split('').map(c => digital[c] || c).join(' ');
            } else {
                // Standard ja muut - k√§yt√§ yksinkertaista ASCII-artia
                const lines = ['', '', '', '', '', ''];
                for (let char of input) {
                    if (ASCII_FONTS.standard[char]) {
                        for (let i = 0; i < 6; i++) {
                            lines[i] += ASCII_FONTS.standard[char][i] + ' ';
                        }
                    } else {
                        // Perus merkki
                        for (let i = 0; i < 6; i++) {
                            if (i === 2) {
                                lines[i] += '  ' + char + '   ';
                            } else {
                                lines[i] += '      ';
                            }
                        }
                    }
                }
                result = lines.join('\n');
            }
            
            // Apply formatting
            const fontMap = {
                'monospace': 'monospace',
                'courier': '"Courier New", Courier, monospace',
                'arial': 'Arial, sans-serif',
                'times': '"Times New Roman", Times, serif',
                'verdana': 'Verdana, sans-serif'
            };
            
            preview.textContent = result;
            preview.style.fontFamily = fontMap[fontFamily] || 'monospace';
            preview.style.fontSize = fontSize + 'px';
            preview.style.fontWeight = bold ? 'bold' : 'normal';
        }
        
        // Kopioi ASCII leikep√∂yd√§lle
        function kopioiAscii() {
            const preview = document.getElementById('asciiPreview');
            const text = preview.textContent;
            
            if (!text || text === 'Anna teksti yll√§olevaan kentt√§√§n...') {
                alert('Generoi ensin ASCII-teksti!');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                alert('ASCII kopioitu leikep√∂yd√§lle!');
            }).catch(err => {
                console.error('Kopiointi ep√§onnistui:', err);
                alert('Kopiointi ep√§onnistui. Yrit√§ uudelleen.');
            });
        }
        
        // Tallenna ASCII logoksi
        function tallennaAsciiLogoksi() {
            const preview = document.getElementById('asciiPreview');
            const text = preview.textContent;
            
            if (!text || text === 'Anna teksti yll√§olevaan kentt√§√§n...') {
                alert('Generoi ensin ASCII-teksti!');
                return;
            }
            
            try {
                localStorage.setItem(CUSTOM_LOGO_KEY, text);
                alert('ASCII-logo tallennettu! Se k√§ytet√§√§n seuraavissa kuiteissa.');
            } catch (e) {
                console.error('Logon tallennus ep√§onnistui:', e);
                alert('Tallennus ep√§onnistui.');
            }
        }
        
        // Hae custom logo
        function haeCustomLogo() {
            try {
                return localStorage.getItem(CUSTOM_LOGO_KEY);
            } catch (e) {
                return null;
            }
        }
        
        // N√§yt√§ ASCII-ty√∂kalu
        function naytaAsciiTyokalu() {
            const modal = document.getElementById('asciiTyokaluModal');
            modal.style.display = 'flex';
            
            // Alusta esikatselu
            document.getElementById('asciiPreview').textContent = 'Anna teksti yll√§olevaan kentt√§√§n...';
        }
        
        // ========== 3B. VIIVAKOODI GENERATOR ==========
        
        const BARCODE_KEY = 'hrk-viivakoodi';
        
        // N√§yt√§ viivakoodi-ikkuna
        function naytaViivakoodi() {
            const modal = document.getElementById('viivakoodiModal');
            modal.style.display = 'flex';
            
            // Lataa tallennettu viivakoodi jos on
            const saved = haeViivakoodi();
            if (saved) {
                document.getElementById('barcodeInput').value = saved;
                generoiViivakoodi();
            }
        }
        
        // Generoi viivakoodi
        function generoiViivakoodi() {
            const input = document.getElementById('barcodeInput').value;
            const canvas = document.getElementById('barcodeCanvas');
            const ctx = canvas.getContext('2d');
            
            if (!input) {
                alert('Anna tilausnumero tai tuotekoodi!');
                return;
            }
            
            // Yksinkertainen viivakoodi (Code 128 tyylinen)
            canvas.width = 400;
            canvas.height = 100;
            
            // Tyhjenn√§
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Piirr√§ viivat
            ctx.fillStyle = 'black';
            const barWidth = 3;
            const spacing = 2;
            let x = 20;
            
            // Start marker
            ctx.fillRect(x, 10, barWidth, 60);
            x += barWidth + spacing;
            ctx.fillRect(x, 10, barWidth, 60);
            x += barWidth + spacing * 2;
            
            // Data bars (pseudo-encoding based on input)
            for (let i = 0; i < input.length; i++) {
                const code = input.charCodeAt(i);
                const pattern = (code % 4) + 1; // 1-4 bars
                
                for (let j = 0; j < pattern; j++) {
                    ctx.fillRect(x, 10, barWidth, 60);
                    x += barWidth + spacing;
                }
                x += spacing;
            }
            
            // End marker
            ctx.fillRect(x, 10, barWidth, 60);
            x += barWidth + spacing;
            ctx.fillRect(x, 10, barWidth, 60);
            
            // Teksti alle
            ctx.font = '14px monospace';
            ctx.textAlign = 'center';
            ctx.fillText(input, canvas.width / 2, 85);
        }
        
        // Tallenna viivakoodi
        function tallennaViivakoodi() {
            const input = document.getElementById('barcodeInput').value;
            
            if (!input) {
                alert('Generoi ensin viivakoodi!');
                return;
            }
            
            try {
                // Tallenna sek√§ teksti ett√§ ASCII-representaatio
                const barcodeText = input;
                const barcodeAscii = '||||| |||| | |||| ||||| || | ||||| || ||||';
                localStorage.setItem(BARCODE_KEY, JSON.stringify({
                    text: barcodeText,
                    ascii: barcodeAscii
                }));
                alert('Viivakoodi tallennettu! Se n√§kyy kuiteissa.');
                suljeModaali('viivakoodiModal');
            } catch (e) {
                console.error('Viivakoodin tallennus ep√§onnistui:', e);
                alert('Tallennus ep√§onnistui.');
            }
        }
        
        // Hae viivakoodi
        function haeViivakoodi() {
            try {
                const saved = localStorage.getItem(BARCODE_KEY);
                if (saved) {
                    const data = JSON.parse(saved);
                    return data.text || data.ascii;
                }
                return null;
            } catch (e) {
                return null;
            }
        }
        
        // ========== 4. MAKSUTIETOJEN GENEROINTI ==========
        
        // Generoi satunnaiset maksutiedot
        function generoiMaksutiedot() {
            const tyyppi = Math.random() > 0.5 ? 'kortti' : 'pankki';
            
            if (tyyppi === 'kortti') {
                const nimet = ['Matti Virtanen', 'Liisa Korhonen', 'Jukka Nieminen', 'Anna M√§kinen', 'Pekka J√§rvinen'];
                const korttiTyypit = ['Visa', 'Mastercard', 'Visa Debit', 'Mastercard Debit'];
                const sovellukset = ['Apple Pay', 'Google Pay', 'Samsung Pay', 'Kortti'];
                const yritykset = ['Nordea', 'OP', 'Danske Bank', 'Handelsbanken', 'S-Pankki'];
                const alat = ['Pankki', 'Fintech', 'Maksupalvelu', 'Luottolaitoshallinto'];
                const maksutavat = ['Contactless', 'Chip & PIN', 'Magneettijuova', 'NFC'];
                
                const korttiNumero = String(Math.floor(Math.random() * 10000)).padStart(4, '0');
                const kk = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
                const vv = String(new Date().getFullYear() + Math.floor(Math.random() * 5) + 1).slice(-2);
                const korttiTyyppi = korttiTyypit[Math.floor(Math.random() * korttiTyypit.length)];
                const onContactless = korttiTyyppi.includes('Visa') || korttiTyyppi.includes('Mastercard');
                
                return {
                    tyyppi: 'kortti',
                    kortinNumero: korttiNumero,
                    kortinOmistaja: nimet[Math.floor(Math.random() * nimet.length)],
                    voimassaolo: `${kk}/${vv}`,
                    maksupvm: new Date().toLocaleDateString('fi-FI'),
                    valtuutuskoodi: String(Math.floor(Math.random() * 1000000)).padStart(6, '0'),
                    korttiTyyppi: korttiTyyppi,
                    sovellus: sovellukset[Math.floor(Math.random() * sovellukset.length)],
                    tapNro: 'TAP' + String(Math.floor(Math.random() * 100000)).padStart(5, '0'),
                    varmennus: String(Math.floor(Math.random() * 10000)).padStart(4, '0'),
                    yritys: yritykset[Math.floor(Math.random() * yritykset.length)],
                    ala: alat[Math.floor(Math.random() * alat.length)],
                    viite: 'REF' + String(Math.floor(Math.random() * 1000000000)).padStart(9, '0'),
                    maksutapa: onContactless ? 
                        (korttiTyyppi.includes('Visa') ? 'Visa Contactless' : 'Mastercard Contactless') :
                        maksutavat[Math.floor(Math.random() * maksutavat.length)],
                    maksutyyppi: korttiTyyppi.includes('Debit') ? 'Debit/Veloitus' : 'Credit/Luotto'
                };
            } else {
                const pankit = ['Nordea', 'OP', 'Danske Bank', 'Handelsbanken', 'S-Pankki'];
                const viite = String(Math.floor(Math.random() * 100000000000000)).padStart(14, '0');
                const tapahtuma = 'TXN' + String(Math.floor(Math.random() * 10000000)).padStart(7, '0');
                
                return {
                    tyyppi: 'pankki',
                    pankki: pankit[Math.floor(Math.random() * pankit.length)],
                    viite: viite,
                    maksupvm: new Date().toLocaleDateString('fi-FI'),
                    tapahtuma: tapahtuma
                };
            }
        }
        
        // ========== 5. MODAALIEN HALLINTA ==========
        
        // Sulje modaali
        function suljeModaali(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Sulje kaikki modaalit
        function suljeKaikkiModaalit() {
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.style.display = 'none';
            });
        }
        
        // Sulje modaali klikkaamalla taustan
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    overlay.style.display = 'none';
                }
            });
        });
        
        // ========== P√ÑIVIT√Ñ CHECKOUT-FORMIN K√ÑSITTELY ==========
        
        // Lis√§√§ historiaan kuitti tallennuksen yhteydess√§
        document.addEventListener('DOMContentLoaded', function() {
            const checkoutForm = document.querySelector('[data-checkout-form]');
            if (checkoutForm) {
                const originalHandler = checkoutForm.onsubmit;
                checkoutForm.addEventListener('submit', function(e) {
                    // Anna alkuper√§isen k√§sittelij√§n suorittua
                    setTimeout(() => {
                        if (viimeisinTilaus) {
                            tallennaKuittiHistoriaan();
                        }
                    }, 100);
                });
            }
        });
    </script>
</body>
</html>
